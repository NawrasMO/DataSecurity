<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script  src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script>

    async function print() {
        try {
            const url = '/print';
            const response = await fetch(url);
            console.log(response)
            if (!response.ok) {

                $("#printStatus").html("Printer" + $("#selectPrinter").val() + "is not avalable")

            }

            const data = await response.json();
            console.log(data["data"]);

        } catch (error) {
            console.error('Fetch error:', error);
        }
        $("#printStatus").html("Printer" + $("#selectPrinter").val() + "start Printing file" + $("#fileName").val())
    }
async function startServer() {
        try {
        const url = '/startServer';
        const response = await fetch(url);
        console.log(response)
        if (!response.ok) {
            throw new Error('Network response was not OK');
        }

        const data = await response.json();
        console.log(data["data"]);
        window.location.href="/home"
        // Update your HTML or perform other actions here
    } catch (error) {
        console.error('Fetch error:', error);
    }
}
async function stopServer() {
    try {
        const url = '/stopServer';
        const response = await fetch(url);
        console.log(response)
        if (!response.ok) {
            throw new Error('Network response was not OK');
        }

        const data = await response.json();
        console.log(data["data"]);
        window.location.href = "/home"
    } catch (error) {
        console.error('Fetch error:', error);
    }

}
</script>

</head>

<h4>Printing Service</h4>

<div>
<label>ServerStatus</label>
    <p th:if="${status=='start'}">Server is started</p>
    <p th:if="${status=='stop'}">Server is Stopped</p>
<button th:if="${status=='stop'}" onclick="startServer()">Start Server</button>

</div>
<div th:if="${status=='start'}">
    <button th:if="${status=='start'}" onclick="stopServer()">Stop Server</button>
    <h1 >Print file</h1>
    <label>File name</label>
    <input type="text" id="fileName" placeholder="insert file name here">
<label>Select printer</label>
<select id="selectPrinter">
<option value="p1">Printer1</option>
<option value="p2">Printer2</option>
<option value="p3">Printer3</option>
</select>
<button onclick="print()"> Print </button>
<p id="printStatus"></p>
</div>